/*!
 * jquery.Jcrop.js v0.9.12
 * jQuery Image Cropping Plugin - released under MIT License
 * Author: Kelly Hallman <khallman@gmail.com>
 * http://github.com/tapmodo/Jcrop
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
!function(e){e.Jcrop=function(t,n){function a(e,t){q=e;{var n=t.split(" ");[].slice.call(arguments,2)}n.forEach(function(t){e.trigger(t)})}function o(e){return Math.round(e)+"px"}function r(e){return K.baseClass+"-"+e}function i(){return e.fx.step.hasOwnProperty("backgroundColor")}function s(t){var n=e(t).offset();return[n.left,n.top]}function c(e){return[e.pageX-J[0],e.pageY-J[1]]}function u(e,t,n){return"number"==typeof n&&e>n?n:"number"==typeof t&&t>e?t:e}function d(t){"object"!=typeof t&&(t={}),K=e.extend(K,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof K[t]&&(K[t]=function(){})})}function l(e,t,n){if(J=s(lt),yt.setCursor("move"===e?e:e+"-resize"),"move"===e)return yt.activateHandlers(h(t),v,n);var a=bt.getFixed(),o=p(e),r=bt.getCorner(p(o));bt.setPressed(bt.getCorner(o)),bt.setCurrent(r),yt.activateHandlers(f(e,a),v,n)}function f(e,t){return function(n){if(K.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}bt.setCurrent(n),vt.update()}}function h(e){var t=e;return xt.watchKeys(),function(e){bt.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,vt.update()}}function p(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function g(e){return function(t){return K.disabled?!1:"move"!==e||K.allowMove?(J=s(lt),ct=!0,l(e,c(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function b(e,t,n){var a=e.width(),o=e.height();a>t&&t>0&&(a=t,o=t/e.width()*e.height()),o>n&&n>0&&(o=n,a=n/e.height()*e.width()),it=e.width()/a,st=e.height()/o,e.width(a).height(o)}function w(e){return{x:e.x*it,y:e.y*st,x2:e.x2*it,y2:e.y2*st,w:e.w*it,h:e.h*st}}function v(){var e=bt.getFixed();e.w>K.minSelect[0]&&e.h>K.minSelect[1]?(vt.enableHandles(),vt.done()):vt.release(),yt.setCursor(K.allowSelect?"crosshair":"default")}function y(e){if(!K.disabled&&K.allowSelect){ct=!0,J=s(lt),vt.disableHandles(),yt.setCursor("crosshair");var t=c(e);return bt.setPressed(t),vt.update(),yt.activateHandlers(m,v,"touch"===e.type.substring(0,5)),xt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}}function m(e){bt.setCurrent(e),vt.update()}function x(){var t=e("<div></div>").addClass(r("tracker"));return Y&&t.css({opacity:0,backgroundColor:"white"}),t}function C(e){U.removeClass().addClass(r("holder")).addClass(e)}function S(e,t){function n(){window.setTimeout(v,l)}var a=e[0]/it,o=e[1]/st,r=e[2]/it,i=e[3]/st;if(!ut){var s=bt.flipCoords(a,o,r,i),c=bt.getFixed(),u=[c.x,c.y,c.x2,c.y2],d=u,l=K.animationDelay,f=s[0]-u[0],h=s[1]-u[1],p=s[2]-u[2],g=s[3]-u[3],b=0,w=K.swingSpeed;a=d[0],o=d[1],r=d[2],i=d[3],vt.animMode(!0);var v=function(){return function(){b+=(100-b)/w,d[0]=Math.round(a+b/100*f),d[1]=Math.round(o+b/100*h),d[2]=Math.round(r+b/100*p),d[3]=Math.round(i+b/100*g),b>=99.8&&(b=100),100>b?(O(d),n()):(vt.done(),vt.animMode(!1),"function"==typeof t&&t.call(Ct))}}();n()}}function k(){var e=K.formatSelect.call(Ct,M(),D());"array"==typeof e?K.onSelect.apply(Ct,e):K.onSelect.call(Ct,e)}function z(e){O([e[0]/it,e[1]/st,e[2]/it,e[3]/st]),K.onSelect.call(Ct,w(bt.getFixed())),vt.enableHandles()}function O(e){bt.setPressed([e[0],e[1]]),bt.setCurrent([e[2],e[3]]),vt.update()}function M(){return w(bt.getFixed())}function D(){return gt.getTransform()}function j(){return bt.getFixed()}function F(e){d(e),A()}function H(){K.disabled=!0,vt.disableHandles(),vt.setCursor("default"),yt.setCursor("default")}function P(){K.disabled=!1,A()}function B(){vt.done(),yt.activateHandlers(null,null)}function I(){U.remove(),L.show(),L.css("visibility","visible"),e(t).removeData("Jcrop")}function R(e,t){vt.release(),H();var n=new mt;n.onload=function(){var a=n.width,o=n.height,r=K.boxWidth,i=K.boxHeight;Z.width(a).height(o),Z.attr("src",e),$.attr("src",e),b(Z,r,i),Q=Z.width(),V=Z.height(),$.width(Q).height(V),lt.width(Q+2*dt).height(V+2*dt),U.width(Q).height(V),wt.resize(Q,V),P(),"function"==typeof t&&t.call(Ct)},n.src=e}function T(e,t,n){var a=t||K.bgColor;K.bgFade&&i()&&K.fadeTime&&!n?e.animate({backgroundColor:a},{queue:!1,duration:K.fadeTime}):e.css("backgroundColor",a)}function A(e){K.allowResize?e?vt.enableOnly():vt.enableHandles():vt.disableHandles(),yt.setCursor(K.allowSelect?"crosshair":"default"),vt.setCursor(K.allowMove?"move":"default"),K.hasOwnProperty("trueSize")&&(it=K.trueSize[0]/Q,st=K.trueSize[1]/V),K.hasOwnProperty("setSelect")&&(z(K.setSelect),vt.done(),delete K.setSelect),wt.refresh(),K.bgColor!=ft&&(T(K.shade?wt.getShades():U,K.shade?K.shadeColor||K.bgColor:K.bgColor),ft=K.bgColor),ht!=K.bgOpacity&&(ht=K.bgOpacity,K.shade?wt.refresh():vt.setBgOpacity(ht)),nt=K.maxSize[0]||0,at=K.maxSize[1]||0,ot=K.minSize[0]||0,rt=K.minSize[1]||0,K.hasOwnProperty("outerImage")&&(Z.attr("src",K.outerImage),delete K.outerImage),vt.refresh()}var J,K=e.extend({},e.Jcrop.defaults),E=navigator.userAgent.toLowerCase(),Y=/msie/.test(E),X=/msie [1-6]\./.test(E);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),d(n);var W={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},L=e(t),G=!0;if("IMG"==t.tagName){if(0!=L[0].width&&0!=L[0].height)L.width(L[0].width),L.height(L[0].height);else{var N=new mt;N.src=L[0].src,L.width(N.width),L.height(N.height)}var Z=L.clone().removeAttr("id").css(W).show();Z.width(L.width()),Z.height(L.height()),L.after(Z).hide()}else Z=L.css(W).show(),G=!1,null===K.shade&&(K.shade=!0);b(Z,K.boxWidth,K.boxHeight);var Q=Z.width(),V=Z.height(),U=e("<div />").width(Q).height(V).addClass(r("holder")).css({position:"relative"}).insertAfter(L).append(Z);K.addClass&&U.addClass(K.addClass);var $=e("<div />"),_=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),et=e("<div />").width("100%").height("100%").css("zIndex",320),tt=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=bt.getFixed();K.onDblClick.call(Ct,e)}).insertBefore(Z).append(_,et);G&&($=e("<img />").attr("src",Z.attr("src")).css(W).width(Q).height(V),_.append($)),X&&tt.css({overflowY:"hidden"});var nt,at,ot,rt,it,st,ct,ut,dt=K.boundary,lt=x().width(Q+2*dt).height(V+2*dt).css({position:"absolute",top:o(-dt),left:o(-dt),zIndex:290}).mousedown(y),ft=K.bgColor,ht=K.bgOpacity;J=s(lt);var pt=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],a=document.createElement("div");try{for(e=0;e<n.length;e++){var o=n[e];o="on"+o;var r=o in a;r||(a.setAttribute(o,"return;"),r="function"==typeof a[o]),t[n[e]]=r}return t.touchstart&&t.touchend&&t.touchmove}catch(i){return!1}}function t(){return K.touchSupport===!0||K.touchSupport===!1?K.touchSupport:e()}return{createDragger:function(e){return function(t){return K.disabled?!1:"move"!==e||K.allowMove?(J=s(lt),ct=!0,l(e,c(pt.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return y(pt.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),gt=function(){function t(e){return"undefined"==typeof e?d:void("number"==typeof e&&(d+=e,0>d&&t(360),a(s,"change change:rotate")))}function n(e,t){if("undefined"==typeof e||"undefined"==typeof t)return f.concat();if("number"==typeof e&&"number"==typeof t){var n=c.max/2;f[0]=u(f[0]+e,-n,n),f[1]=u(f[1]+t,-n,n),a(s,"change change:translate")}}function o(e,t,o){return"undefined"==typeof e?l:(l=u(l+t,0,1),o&&1!=l&&n(-o.coefficient*(2*o.x-e.w)/e.w,-o.coefficient*(2*o.y-e.h)/e.h),a(s,"change change:translate"),void 0)}function r(){return{r:d,s:l,t:f}}function i(e,t){s.on(e,t)}var s=e({}),c={w:Z.width(),h:Z.height()};c.max=Math.max(c.w,c.h);var d=0,l=1,f=[0,0];return{rotate:t,translate:n,scale:o,getTransform:r,on:i}}(),bt=function(){function t(e){e=s(e),w=g=e[0],v=b=e[1]}function n(e){e=s(e),f=e[0]-w,h=e[1]-v,w=e[0],v=e[1]}function a(){return[f,h]}function o(e){var t=e[0],n=e[1],a=K.panOnBoundaries?gt.translate:function(){};0>g+t&&(a(-t,0),t-=t+g),0>b+n&&(a(0,-n),n-=n+b),v+n>V&&(a(0,-n),n+=V-(v+n)),w+t>Q&&(a(-t,0),t+=Q-(w+t)),g+=t,w+=t,b+=n,v+=n}function r(e){var t=i();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function i(){if(!K.aspectRatio)return u();var e,t,n,a,o=K.aspectRatio,r=K.minSize[0]/it,i=K.maxSize[0]/it,s=K.maxSize[1]/st,l=w-g,f=v-b,h=Math.abs(l),p=Math.abs(f),y=h/p;return 0===i&&(i=10*Q),0===s&&(s=10*V),o>y?(t=v,n=p*o,e=0>l?g-n:n+g,0>e?(e=0,a=Math.abs((e-g)/o),t=0>f?b-a:a+b):e>Q&&(e=Q,a=Math.abs((e-g)/o),t=0>f?b-a:a+b)):(e=w,a=h/o,t=0>f?b-a:b+a,0>t?(t=0,n=Math.abs((t-b)*o),e=0>l?g-n:n+g):t>V&&(t=V,n=Math.abs(t-b)*o,e=0>l?g-n:n+g)),e>g?(r>e-g?e=g+r:e-g>i&&(e=g+i),t=t>b?b+(e-g)/o:b-(e-g)/o):g>e&&(r>g-e?e=g-r:g-e>i&&(e=g-i),t=t>b?b+(g-e)/o:b-(g-e)/o),0>e?(g-=e,e=0):e>Q&&(g-=e-Q,e=Q),0>t?(b-=t,t=0):t>V&&(b-=t-V,t=V),d(c(g,b,e,t))}function s(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>Q&&(e[0]=Q),e[1]>V&&(e[1]=V),[Math.round(e[0]),Math.round(e[1])]}function c(e,t,n,a){var o=e,r=n,i=t,s=a;return e>n&&(o=n,r=e),t>a&&(i=a,s=t),[o,i,r,s]}function u(){var e,t=w-g,n=v-b;return nt&&Math.abs(t)>nt&&(w=t>0?g+nt:g-nt),at&&Math.abs(n)>at&&(v=n>0?b+at:b-at),rt/st&&Math.abs(n)<rt/st&&(v=n>0?b+rt/st:b-rt/st),ot/it&&Math.abs(t)<ot/it&&(w=t>0?g+ot/it:g-ot/it),0>g&&(w-=g,g-=g),0>b&&(v-=b,b-=b),0>w&&(g-=w,w-=w),0>v&&(b-=v,v-=v),w>Q&&(e=w-Q,g-=e,w-=e),v>V&&(e=v-V,b-=e,v-=e),g>Q&&(e=g-V,v-=e,b-=e),b>V&&(e=b-V,v-=e,b-=e),d(c(g,b,w,v))}function d(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}function l(e,t){p.on(e,t)}var f,h,p=e({}),g=0,b=0,w=0,v=0;return{flipCoords:c,setPressed:t,setCurrent:n,getOffset:a,moveOffset:o,getCorner:r,getFixed:i,on:l}}(),wt=function(){function t(e,t){p.left.css({height:o(t)}),p.right.css({height:o(t)})}function n(){return a(bt.getFixed())}function a(e){p.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),p.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(V-e.y2)}),p.right.css({left:o(e.x2),width:o(Q-e.x2)}),p.left.css({width:o(e.x)})}function r(){return e("<div />").css({position:"absolute",backgroundColor:K.shadeColor||K.bgColor}).appendTo(h)}function i(){f||(f=!0,h.insertBefore(Z),n(),vt.setBgOpacity(1,0,1),$.hide(),s(K.shadeColor||K.bgColor,1),vt.isAwake()?u(K.bgOpacity,1):u(1,1))}function s(e,t){T(l(),e,t)}function c(){f&&(h.remove(),$.show(),f=!1,vt.isAwake()?vt.setBgOpacity(K.bgOpacity,1,1):(vt.setBgOpacity(1,1,1),vt.disableHandles()),T(U,0,1))}function u(e,t){f&&(K.bgFade&&!t?h.animate({opacity:1-e},{queue:!1,duration:K.fadeTime}):h.css({opacity:1-e}))}function d(){K.shade?i():c(),vt.isAwake()&&u(K.bgOpacity)}function l(){return h.children()}var f=!1,h=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),p={top:r(),left:r().height(V),right:r().height(V),bottom:r()};return{update:n,updateRaw:a,getShades:l,setBgColor:s,enable:i,disable:c,resize:t,refresh:d,opacity:u}}(),vt=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:K.borderOpacity}).addClass(r(t));return _.append(n),n}function n(t,n){var a=e("<div />").mousedown(g(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return pt.support&&a.bind("touchstart.jcrop",pt.createDragger(t)),et.append(a),a}function a(e){var t=K.handleSize,a=n(e,F++).css({opacity:K.handleOpacity}).addClass(r("handle"));return t&&a.width(t).height(t),a}function i(e){return n(e,F++).addClass("jcrop-dragbar")}function s(e){var t;for(t=0;t<e.length;t++)B[e[t]]=i(e[t])}function c(e){var n,a;for(a=0;a<e.length;a++){switch(e[a]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}H[e[a]]=t(n)}}function u(e){var t;for(t=0;t<e.length;t++)P[e[t]]=a(e[t])}function d(e,t){var n=gt.translate();K.shade||$.css({top:o(-t+n[1]),left:o(-e+n[0])}),tt.css({top:o(t),left:o(e)})}function l(e,t){tt.width(Math.round(e)).height(Math.round(t))}function f(e){$.css({transform:"rotate("+e+"deg)"})}function h(e){$.width(R*e).height(T*e)}function p(){var e=bt.getFixed();bt.setPressed([e.x,e.y]),bt.setCurrent([e.x2,e.y2]),b()}function b(e){return j?v(e):void 0}function v(e){var t=bt.getFixed(),n=gt.rotate(),a=gt.scale();h(a),l(t.w,t.h),d(t.x,t.y),f(n),K.shade&&wt.updateRaw(t),j||m(),e?k():K.onChange.call(Ct,w(t))}function y(e,t,n){(j||t)&&(K.bgFade&&!n?Z.animate({opacity:e},{queue:!1,duration:K.fadeTime}):Z.css("opacity",e))}function m(){tt.show(),K.shade?wt.opacity(ht):y(ht,!0),j=!0}function C(){O(),tt.hide(),K.shade?wt.opacity(1):y(1),j=!1,K.onRelease.call(Ct)}function S(){I&&et.show()}function z(){return I=!0,K.allowResize?(et.show(),!0):void 0}function O(){I=!1,et.hide()}function M(e){e?(ut=!0,O()):(ut=!1,z())}function D(){M(!1),p()}var j,F=370,H={},P={},B={},I=!1,R=$.width(),T=$.height();K.dragEdges&&e.isArray(K.createDragbars)&&s(K.createDragbars),e.isArray(K.createHandles)&&u(K.createHandles),K.drawBorders&&e.isArray(K.createBorders)&&c(K.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var A=x().mousedown(g("move")).on("mousewheel",function(e){e.preventDefault(),e.stopPropagation();var t=bt.getFixed(),n=e.originalEvent,a=xt.augmented()?10:1,o={x:e.offsetX,y:e.offsetY,coefficient:K.reactiveZoom*a};n.wheelDelta>0?gt.scale(t,a/100,o):n.wheelDelta<0&&gt.scale(t,-a/100,o)}).css({cursor:"move",position:"absolute",zIndex:360});return pt.support&&A.bind("touchstart.jcrop",pt.createDragger("move")),_.append(A),O(),gt.on("change",v),{updateVisible:b,update:v,release:C,refresh:p,isAwake:function(){return j},setCursor:function(e){A.css("cursor",e)},enableHandles:z,enableOnly:function(){I=!0},showHandles:S,disableHandles:O,animMode:M,setBgOpacity:y,done:D}}(),yt=function(){function t(t){lt.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",i).bind("touchend.jcrop",s):f&&e(document).bind("mousemove.jcrop",a).bind("mouseup.jcrop",o)}function n(){lt.css({zIndex:290}),e(document).unbind(".jcrop")}function a(e){return d(c(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),ct&&(ct=!1,l(c(e)),vt.isAwake()&&k(),n(),d=function(){},l=function(){}),!1}function r(e,n,a){return ct=!0,d=e,l=n,t(a),!1}function i(e){return d(c(pt.cfilter(e))),!1}function s(e){return o(pt.cfilter(e))}function u(e){lt.css("cursor",e)}var d=function(){},l=function(){},f=K.trackDocument;return f||lt.mousemove(a).mouseup(o).mouseout(o),Z.before(lt),{activateHandlers:r,setCursor:u}}(),mt=function(){function e(e){Z.css("transform","rotate("+e+"deg)")}function t(e){Z.width(o*e).height(r*e)}function n(e){var t=e[0],n=e[1];Z.css({left:t,top:n})}function a(){vt.isAwake()&&(n(gt.translate()),t(gt.scale()),e(gt.rotate()))}var o=Z.width(),r=Z.height();return gt.on("change",a),{update:a}}(),xt=function(){function t(){K.keySupport&&(u.show(),u.focus())}function n(){u.hide()}function a(e,t,n){K.allowMove&&bt.moveOffset([t,n]),e.preventDefault(),e.stopPropagation()}function o(e,t,n){if(K.allowRotate)if(n){var a=t>0?1:-1;gt.rotate((90-gt.rotate()%90)*a)}else gt.rotate(t);e.preventDefault(),e.stopPropagation()}function r(e,t,n){K.allowPan&&gt.translate(t,n),e.preventDefault(),e.stopPropagation()}function i(e){var t=e.keyCode|(e.shiftKey?l.shift:0)|(e.metaKey?l.meta:0)|(e.altKey?l.alt:0),n=e.shiftKey?10:1;switch(c=e.shiftKey,t){case l.up:case l.up|l.shift:a(e,0,-n);break;case l.left:case l.left|l.shift:a(e,-n,0);break;case l.right:case l.right|l.shift:a(e,n,0);break;case l.down:case l.down|l.shift:a(e,0,n);break;case l.up|l.alt:case l.up|l.alt|l.shift:r(e,0,-n);break;case l.right|l.alt:case l.right|l.alt|l.shift:r(e,n,0);break;case l.down|l.alt:case l.down|l.alt|l.shift:r(e,0,n);break;case l.left|l.alt:case l.left|l.alt|l.shift:r(e,-n,0);break;case l.right|l.meta:case l.right|l.meta|l.shift:o(e,n,c);break;case l.left|l.meta:case l.left|l.meta|l.shift:o(e,-n,c);break;case 27:K.allowSelect&&vt.release();break;case 9:return!0}return!1}function s(){return c}var c=!1,u=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),d=e("<div />").css({position:"absolute",overflow:"hidden"}).append(u),l={up:38,right:39,down:40,left:37,shift:256,meta:512,alt:1024};return K.keySupport&&(u.keydown(i).keyup(function(){c=!1}).blur(n),X||!K.fixedSupport?(u.css({position:"absolute",left:"-20px"}),d.append(u).insertBefore(Z)):u.insertBefore(Z)),{watchKeys:t,augmented:s}}();pt.support&&lt.bind("touchstart.jcrop",pt.newSelection),et.hide(),A(!0);var Ct={setImage:R,animateTo:S,setSelect:z,setOptions:F,tellSelect:M,tellScaled:j,setClass:C,disable:H,enable:P,cancel:B,release:vt.release,destroy:I,focus:xt.watchKeys,getBounds:function(){return[Q*it,V*st]},getWidgetSize:function(){return[Q,V]},getScaleFactor:function(){return[it,st]},getOptions:function(){return K},ui:{holder:U,selection:tt}};return Y&&U.bind("selectstart",function(){return!1}),L.data("Jcrop",Ct),Ct},e.fn.Jcrop=function(t,n){var a;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),a=e.Jcrop(this,t),e.isFunction(n)&&n.call(a)}):(e(this).css({display:"block",visibility:"hidden"}),a=e.Jcrop(this,t),e.isFunction(n)&&n.call(a))}),this},e.Jcrop.Loader=function(t,n,a){function o(){i.complete?(r.unbind(".jcloader"),e.isFunction(n)&&n.call(i)):window.setTimeout(o,50)}var r=e(t),i=r[0];r.bind("load.jcloader",o).bind("error.jcloader",function(){r.unbind(".jcloader"),e.isFunction(a)&&a.call(i)}),i.complete&&e.isFunction(n)&&(r.unbind(".jcloader"),n.call(i))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,allowRotate:!0,allowPan:!0,panOnBoundaries:!0,reactiveZoom:5,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:!0,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){},formatSelect:function(e,t){return{height:e.h,width:e.w,x:e.x,y:e.y,translateX:t.t[0],translateY:t.t[1],rotate:t.r,scale:t.s}}}}(jQuery);